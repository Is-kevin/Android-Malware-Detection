'''
功能：
生成所有样本的特征向量，存入featureVec文件
实现：
将allFeatureSet里面的attribute组成特征向量，遍历sample文件中的每个sample，有对应特征的为1，没有则为0
顺序与label文件中的顺序一致
'''
import csv
import datetime
from share import allFeatureSetPath

start = datetime.datetime.now()
allFeature = []  # 所有特征的list
featureVec = []  # 所有特征向量的list

# featureVecPath = "featureVec"  # 输出文件
# 读取所有特征
lines = csv.reader(open(allFeatureSetPath, encoding='utf-8'))
for line in lines:
    allFeature.append(line[0].strip())
featureNum = len(allFeature)
end = datetime.datetime.now()
preprocesstime = end - start


# print("特征总数：", str(featureNum))

# 处理所有样本的特征向量
# namelines = csv.reader(open(allSampleNamePath, encoding='utf-8'))
# for nameline in namelines:
#     tmpfeatureVec = [0]*featureNum  # 特征向量初始化为0
#     featurelines = csv.reader(open(allSamplePath + nameline[0].strip(), encoding='utf-8'))
#     for featureline in featurelines:
#         feature = featureline[0].strip()
#         if feature in allFeature:
#             tmpfeatureVec[allFeature.index(feature)] = 1
#     featureVec.append(tmpfeatureVec)
#
# with open(featureVecPath, 'w+', encoding="utf-8") as f:
#     for vec in featureVec:
#         f.write(str(vec) + '\n')